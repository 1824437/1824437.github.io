<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="baidu-site-verification" content="1EB8XoOl0C"><meta name="google-site-verification" content="K7thEgdLm0UfRWJ5MGdF7sCcjClSzAlxFLPv2Oz5CGM"><title> CentOS学习 · 经历过浏览器标准之乱，又TM正在经历终端之乱及所带来的框架之乱</title><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="CentOS学习 - ZhuTao&lt;zhutao@live.cn&gt;"><meta name="keywords" content="Javascript Typescript CSS Sass Vue React MVVM"><meta name="author" content="ZhuTao&lt;zhutao@live.cn&gt;"><link rel="short icon" href="/images/favicon.ico"><link rel="stylesheet" href="/css/bubuzou.css"><link rel="search" type="application/opensearchdescription+xml" href="1824437.github.io/atom.xml" title="经历过浏览器标准之乱，又TM正在经历终端之乱及所带来的框架之乱"><meta name="generator" content="Hexo 4.0.0"></head><body><header><div class="header row"> <a href="/" class="logo-link"><img src="/images/logo.png"></a><ul id="nav_list" class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" data-hover="首页" class="nav-list-link">首页</a></li><li class="nav-list-item"><a href="/categories/web/" target="_self" data-hover="WEB" class="nav-list-link">WEB</a></li><li class="nav-list-item"><a href="/categories/frame/" target="_self" data-hover="框架" class="nav-list-link">框架</a></li><li class="nav-list-item"><a href="/categories/browser/" target="_self" data-hover="浏览器" class="nav-list-link">浏览器</a></li><li class="nav-list-item"><a href="/categories/editor/" target="_self" data-hover="编辑器" class="nav-list-link">编辑器</a></li><li class="nav-list-item"><a href="/categories/standard/" target="_self" data-hover="标准" class="nav-list-link">标准</a></li><li class="nav-list-item"><a href="/categories/popular/" target="_self" data-hover="流行" class="nav-list-link">流行</a></li><li class="nav-list-item"><a href="/categories/compiler/" target="_self" data-hover="编译" class="nav-list-link">编译</a></li><li class="nav-list-item"><a href="/categories/test/" target="_self" data-hover="测试" class="nav-list-link">测试</a></li><li class="nav-list-item"><a href="/categories/os/" target="_self" data-hover="OS" class="nav-list-link">OS</a></li></ul><div class="search"><a id="search_btn" href="#search"></a></div><div id="nav_btn" class="nav-btn"><span></span><span></span><span></span></div></div></header><div class="row scroll-con"><section class="container"><!-- for archive page--><div id="postAr" class="post"><article class="post-block"><h1 class="post-title">CentOS学习</h1><div class="post-info">2019-10-29<p class="visit"></p></div><div class="post-content"><h4 id="资料"><a href="#资料" class="headerlink" title="资料"></a>资料</h4><p>ip命令<a href="http://blog.csdn.net/hunyxv/article/details/51900482">http://blog.csdn.net/hunyxv/article/details/51900482</a><br>centOS网络相关<a href="http://blog.chinaunix.net/uid-26495963-id-3230810.html">http://blog.chinaunix.net/uid-26495963-id-3230810.html</a></p>
<p>-<br>####查看系统版本<br><code>cat /etc/redhat-release</code><br>####查看系统网络信息<br><code>ip addr</code>  设备及状态<br><code>ip -s link</code>查看网络接口的统计数据<br>####查看bash版本<br><code>bash -version</code><br>####查看哪个包提供了某个命令<br><code>yum provides &lt;commandname&gt;``yum whatprovides &lt;commandname&gt;</code><br>####vi切换到命令行<code>ctrl+z</code>,再切换到vi<code>fg</code><br>####包管理器yum  </p>
<p>1.<code>yum list installed</code>查看已安装的包</p>
<p>####有线网卡连接网络 </p>
<p><strong>!!!一定要注意网线连好了</strong> </p>
<ol>
<li>配置文件路径<code>/etc/sysconfig/network-script/ifcfg-&lt;ethernet name&gt;</code></li>
<li>配置项<code>ONBOOT=yes</code></li>
<li>通过<code>ip addr</code>查看网卡mac地址，在配置文件中增加<br> <code>HWADDR=00:0c:bd:05:4e:cc​</code></li>
<li>重启网卡服务<code>systemctl restart network``service network restart</code></li>
<li>设定开机启动服务<code>systemctl enable NetworkManager-wait-online.service</code></li>
</ol>
<p>####cenos命令行 设置字号  </p>
<p>修改<code>etc/vconsole.conf</code> 改字体即可<br><code>setfont &lt;fontname&gt;</code> 修改字体即可达到修改字号</p>
<p>####CentOS 7电源管理设置<br>配置文件: <code>/etc/systemd/logind.conf</code><br>配置项<code>HandleLidSwitch=lock</code> 合盖不休眠<br>配置完后重启配置, <code>systemctl restart systemd-logind</code>  </p>
<h3 id="安装git"><a href="#安装git" class="headerlink" title="安装git"></a>安装git</h3><p><code>yum install git</code></p>
<h3 id="进入休眠状态"><a href="#进入休眠状态" class="headerlink" title="进入休眠状态"></a>进入休眠状态</h3><p><code>sudo pm-hibernate</code> //休眠<br><code>sudo pm-suspend</code><br><code>sudo pm-pm-suspend-hybrid</code></p>
<h3 id="创建账号及设置权限"><a href="#创建账号及设置权限" class="headerlink" title="创建账号及设置权限"></a>创建账号及设置权限</h3><p>系统的账号文件 /etc/passwd<br>用户组列表文件：/etc/group  </p>
<ol>
<li><p>创建账号 <code>adduser t.z</code></p>
</li>
<li><p>添加sudo仅限</p>
<p> sudoers文件 /etc/sudoers<br> 在root下增加一行，保存即可</p>
</li>
<li><p>切换用户 <code>su &lt;username&gt;</code></p>
</li>
<li><p>修改主机名 <code>hostnamectl set-hostname &lt;hostname&gt;</code></p>
</li>
<li><p>查看主机信息 hostnamectl status</p>
</li>
</ol>
<p>-</p>
<h2 id="install-software"><a href="#install-software" class="headerlink" title="install software"></a>install software</h2><h3 id="安装nginx-跳转"><a href="#安装nginx-跳转" class="headerlink" title="安装nginx 跳转"></a>安装nginx <a href="../nginx/centos安装nginx.md">跳转</a></h3><h3 id="安装epel源"><a href="#安装epel源" class="headerlink" title="安装epel源"></a>安装epel源</h3><p><code>sudo yum install epel-release</code></p>
<h3 id="安装nodejs-official-guide"><a href="#安装nodejs-official-guide" class="headerlink" title="安装nodejs official guide"></a>安装nodejs <a href="https://nodejs.org/en/download/package-manager/#header-enterprise-linux-and-fedora">official guide</a></h3><ol>
<li><code>curl --silent --location https://rpm.nodesource.com/setup_9.x | sudo bash -</code></li>
<li><code>sudo yum -y install nodejs</code></li>
</ol>
<h3 id="安装-yarn"><a href="#安装-yarn" class="headerlink" title="安装 yarn"></a>安装 yarn</h3><ol>
<li><code>curl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo</code></li>
<li><code>sudo yum install yarn</code></li>
</ol>
<h3 id="install-rsync"><a href="#install-rsync" class="headerlink" title="install rsync"></a>install rsync</h3><p><code>yum install rsync</code></p>
<h3 id="install-shadowsocks-server"><a href="#install-shadowsocks-server" class="headerlink" title="install shadowsocks server"></a>install shadowsocks server</h3><ol>
<li><p>install pip package manager <code>sudo yum install python-setuptools &amp;&amp; sudo easy_install pip</code></p>
</li>
<li><p><code>pip install shadowsocks</code></p>
</li>
<li><p>配置</p>
<ul>
<li><p>创建<code>/etc/shadowsocks.json</code> <a href="https://morning.work/page/2015-12/install-shadowsocks-on-centos-7.html">详见</a></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">		&#123;</span><br><span class="line">    &quot;server&quot;: &quot;xxx&quot;,</span><br><span class="line">    &quot;server_port&quot;: xxx,</span><br><span class="line">    &quot;password&quot;: &quot;xxx&quot;,</span><br><span class="line">    &quot;method&quot;: &quot;aes-256-cfb&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>  <strong>说明：</strong></p>
<p>  method为加密方法，可选aes-128-cfb, aes-192-cfb, aes-256-cfb, bf-cfb, cast5-cfb, des-cfb, rc4-md5, chacha20, salsa20, rc4, table<br>  server_port为服务监听端口<br>  password为密码，可使用密码生成工具生成一个随机密码<br>  以上三项信息在配置 shadowsocks 客户端时需要配置一致，具体说明可查看 shadowsocks 的帮助文档。</p>
</li>
<li><p>配置自启动</p>
<p>  创建文件 <code>/etc/systemd/system/shadowsocks.service</code></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Shadowsocks</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">TimeoutStartSec=0</span><br><span class="line">ExecStart=/usr/bin/ssserver -c /etc/shadowsocks.json</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>
</li>
<li><p>手动启动</p>
<p>  <code>systemctl enable shadowsocks</code><br>  <code>systemctl start shadowsocks</code></p>
</li>
<li><p>检查服务</p>
<p>  <code>systemctl status shadowsocks -l</code></p>
</li>
</ul>
</li>
</ol>
<h3 id="安装-shadowsocks-client"><a href="#安装-shadowsocks-client" class="headerlink" title="安装 shadowsocks client"></a>安装 shadowsocks client</h3><p><a href="https://brickyang.github.io/2017/01/14/CentOS-7-%E5%AE%89%E8%A3%85-Shadowsocks-%E5%AE%A2%E6%88%B7%E7%AB%AF/">详见</a></p>
<h3 id="install-network-tools"><a href="#install-network-tools" class="headerlink" title="install network tools"></a>install network tools</h3><p>必须安装，否则网络命令无法执行</p>
<p><code>yum install net-tools</code></p>
<h3 id="centos-systemd-服务单元设置-system-service"><a href="#centos-systemd-服务单元设置-system-service" class="headerlink" title="centos systemd 服务单元设置 system.service"></a>centos systemd 服务单元设置 system.service</h3><p>设置为系统服务，开机自启动。</p>
<p><a href="http://blog.csdn.net/younger_china/article/details/52539522">详见</a></p>
<h3 id="安装-Let’s-Encrypt-免费证书-official"><a href="#安装-Let’s-Encrypt-免费证书-official" class="headerlink" title="安装 Let’s Encrypt 免费证书 official"></a>安装 Let’s Encrypt 免费证书 <a href="https://certbot.eff.org/lets-encrypt/centosrhel7-nginx">official</a></h3><ol>
<li><p><code>sudo yum -y install yum-utils</code></p>
</li>
<li><p><code>sudo yum-config-manager --enable rhui-REGION-rhel-server-extras rhui-REGION-rhel-server-optional</code></p>
</li>
<li><p><code>sudo yum install certbot-nginx</code></p>
<p> 注意： certbot-nginx使用的是epel源，没有安装的话先安装<br> <code>yum install epel-release</code>; 如果装了还找不到包，可能是源没打开。需要配置一下<br> 打开<code>/etc/yum.repos.d/epel.repo</code> 如果<code>enabled=0</code>,说明没启用， 改成1，然后再<code>yum repolist</code>一下，发现源配置了。再做第3步的安装。</p>
</li>
<li><p>创建证书</p>
<p> <code>sudo certbot --nginx</code>， 根据向导输入相应的信息会生成文件及修改nginx<br> <strong>每三月换一次，不用改nginx配置</strong><br> <code>sudo certbot --nginx certonly</code></p>
</li>
</ol>
<h3 id="ssh-反空闲"><a href="#ssh-反空闲" class="headerlink" title="ssh 反空闲"></a>ssh 反空闲</h3><ol>
<li><p>配置<code>/etc/ssh/sshd_config</code></p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">？、10分钟无动作登出</span><br><span class="line">ClientAliveInterval 60 //访问间隔，秒</span><br><span class="line">ClientAliveCountMax 10 //空闲次数</span><br></pre></td></tr></table></figure>
</li>
<li><p>重启 ssh服务</p>
<p> <code>service sshd restart</code></p>
<blockquote>
<p><strong>幺蛾子：</strong>　sshd command not found    </p>
</blockquote>
<p> 搬瓦工虚机把这个服务删除了。得重新装一下。  <code>sudo yum install openssh-server</code></p>
</li>
</ol>
<h3 id="账号管理-登录管理"><a href="#账号管理-登录管理" class="headerlink" title="账号管理|登录管理"></a>账号管理|登录管理</h3><ol>
<li>限制远程登录尝试密码的次数</li>
</ol>
<p><a href="http://www.cnblogs.com/zhming26/p/6186402.html">infos</a></p>
<h3 id="异常：字符集异常处理"><a href="#异常：字符集异常处理" class="headerlink" title="异常：字符集异常处理"></a>异常：字符集异常处理</h3> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ocale: Cannot set LC_CTYPE to default locale: No such file or directory</span><br><span class="line">locale: Cannot set LC_ALL to default locale: No such file or directory</span><br></pre></td></tr></table></figure>
<p> <a href="https://www.cyberciti.biz/faq/failed-to-set-locale-defaulting-to-c-warning-message-on-centoslinux/">参考</a></p>
<ol>
<li><p><code>sudo vi /etc/profile.d/my-custom.lang.sh</code>创建一个脚本</p>
<p>写入内容：</p>
</li>
</ol>
<pre><code>## US English ##
export LANG=en_US.UTF-8
export LANGUAGE=en_US.UTF-8
export LC_COLLATE=C
export LC_CTYPE=en_US.UTF-8</code></pre><ol start="2">
<li>执行 <code>source my=custom.lang.sh</code></li>
</ol>
</div></article></div><div class="right-container"><div class="widget"><div id="arAnchorBar"></div></div></div></section></div><div class="right-menu"></div><div class="modal search-modal"><div class="input-field"><input type="text" id="search_input"><label for="search-input">搜索</label></div><div id="search_result" class="search-result"></div></div><div class="blog-overlay"></div><footer class="row"><div class="footer-con"><div class="paginator"><a href="/web/css/flex/" title="flex" class="prev">PREV</a><a href="/frame/%E6%A1%86%E6%9E%B6%E7%9A%84%E6%AF%94%E8%BE%83/%E6%A1%86%E6%9E%B6%E7%9A%84%E6%AF%94%E8%BE%83/" title="Vue与React比较" class="next">NEXT</a></div><div class="copyright"><p>© 2016 - 2019 <a target="_blank">ZhuTao<zhutao@live.cn></a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> <br> and <a href="https://github.com/Bulandent/hexo-theme-bubuzou" target="_blank">hexo-theme-bubuzou</a></p><p> <span style="padding-right: 6px;">闽ICP备16007301号-2</span></p></div><div class="totop"><i></i></div></div></footer><script src="/scripts/jquery-1.8.2.min.js"></script><script src="/scripts/ar-anchor.js"></script><script src="/scripts/main.js"></script></body></html>